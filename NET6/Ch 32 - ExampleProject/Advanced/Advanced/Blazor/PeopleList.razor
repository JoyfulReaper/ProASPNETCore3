@inject DataContext _context

<table class="table table-sm table-bordered table-striped">
	<thead>
		<tr>
			<th>ID</th>
			<th>Name</th>
			<th>Dept</th>
			<th>Location</th>
		</tr>
	</thead>
	<tbody>
		@foreach (Person p in People)
		{
			<tr class="@GetClass(p.Location.City)">
				<td>
					@p.PersonId
				</td>
				<td>
					@p.LastName, @p.FirstName
				</td>
				<td>
					@p.Department.Name
				</td>
				<td>
					@p.Location.City, @p.Location.State
				</td>
			</tr>
		}
	</tbody>
</table>


<div class="form-group">
	<label for="selectedCity">City</label>
	<select name="selectedCity" class="form-control" @bind=SelectedCity>
		<option disabled selected>Select City</option>
		@foreach (string city in Cities)
		{
			<option selected="@(city == SelectedCity)">@city</option>
		}
	</select>
</div>
<button class="btn btn-primary" type="submit">Select</button>


@code {
	public IEnumerable<Person> People =>
			_context.People
			.Include(p => p.Department)
			.Include(p => p.Location);

	public IEnumerable<string> Cities =>
			_context.Locations.Select(l => l.City).Distinct();

	public string SelectedCity { get; set; }

	public string GetClass(string city) =>
			SelectedCity == city ? "bg-info text-white" : "";
}
